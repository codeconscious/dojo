name: learn-github-actions
run-name: ${{ github.actor }}さんはGitHub Actionsの勉強していらっしゃる!
on: [push, pull_request]
jobs:
  first:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      # - run: echo "成功しました！"
      - name: Get latest commit
        run: |
          echo "Get length of the array:"
          length=$(jq 'length' response.json)

          echo "Get index of the latest commit:"
          index=$(($length - 1))

          echo "Get context of the latest commit:"
          latest_commit=$(jq --argjson index $index '.[$index]' response.json)
          echo "$latest_commit"

          echo "Get commit message of the latest commit:"
          latest_commit_message=$(echo "$latest_commit" | jq -r '.commit.message')
          echo "$latest_commit_message"

          echo "Get commit SHA of the latest commit:"
          latest_commit_sha=$(echo "$latest_commit" | jq -r '.sha')
          echo "$latest_commit_sha"
